<!DOCTYPE html>
<html lang="en">
  
  <head>
    <title>Snake.City</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">


    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="game.css">
	
	<script src="/socket.io/socket.io.js"></script>
	
	<script>

	const socket = io.connect();

	// Get saved data from sessionStorage and send to server
	let session_id = sessionStorage.getItem('session_id');
	
	// Connect the session
	socket.emit('start-session', { session_id: session_id });

	// Look at the receipt from the server
	socket.on("set-session-acknowledgement", function(data)
	{
		console.log( "Received session id " + data.session_id);
		sessionStorage.setItem('session_id', data.session_id);
	});
	
	// Send a heartbeat every 3 seconds - but also send one straight away - so if the client disconnects
	// within the first 3 seconds - we know
	setInterval(function() {	
		console.log( "Test session storage: " + sessionStorage.getItem('session_id') );

		socket.emit('heartbeat', { message: "hello" });		
	}, 2000); // milliseconds = 2 seconds = 2000 milliseconds
		 
	</script>
	
    <script src="game.js" defer></script>
    <script src="stopwatch.js"></script>
  </head>  

  <body>
      <div id = "buttonA" class = "A-button"></div>
      <h1 id="timer">00 : 00 . 000</h1>
      <h1 id="instruction">Start pressing both sides!</h1>
      <div id = "debugText">Initiating...</div>
	  <div id = "stateText">Current State is...</div>
	  <div id = "phoneNum">Players: 0</div>
      <div id = "buttonB" class = "B-button"></div>
      <div id = "rectangle" class = "rectangle"></div>

  </body>
  
</html>
